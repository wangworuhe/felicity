# 幸福时刻小程序 - 产品需求文档 (PRD)

## 1. 核心理念：极简与低阻力 (Low Friction)

### 1.1 设计原则
所有建议的共识是：记录幸福的最大敌人是"麻烦"和"不知道写什么"。

- **启动原则**：让"只写一句"也算完成。如果记录过程超过 10 秒，用户很难坚持。
- **心理学基础**：参考积极心理学的"三件好事（Three Good Things）"练习，对抗大脑的消极偏见。

### 1.2 用户体验目标
- 打开小程序后 **3 秒内** 即可开始记录
- 完成一条记录 **不超过 10 秒**（纯文字模式）
- 零学习成本，无需教程即可上手

---

## 2. 功能设计：从记录到回顾

### 2.1 记录系统（输入端）

#### A. 多模态输入

**基础功能（MVP 必需）**：
- ✅ **文字输入**：自由记录想法、感受
- ✅ **图片上传**：限制最多 1-3 张（控制存储成本）
- ⏸️ **视频录制**：可选功能，MVP 阶段暂不实现

**扩展功能（V2.0）**：
- 📝 **语音记录**：录制声音或自动转文字
- 😊 **心情 Emoji**：快速选择表情（😊、😂、🥰、😍、😌 等）
- 📊 **强度滑块**：设置开心程度（1-10 分）

**自动元数据**：
- 📍 **时间戳**：自动记录创建时间
- 🗺️ **地理位置**：自动记录地点（需用户授权）

#### B. 降低阻力的辅助功能

**一键记录**：
- 首页无 Dashboard，打开即是输入框
- 点击页面任意位置即可开始输入

**2 秒模板（引导式记录）**：
预设问题模板，用户可一键选择：
- "发生了什么？"
- "为什么开心？"
- "我想记住的关键词"
- "今天最棒的一件事"

**自动保存草稿**：
- 用户中途退出时自动保存
- 下次打开时提醒恢复草稿
- 防止灵感丢失

---

### 2.2 回顾系统（输出端）

#### A. 多维度浏览

**时间线（MVP 必需）**：
- 按天倒序浏览
- 按周/月切换视图
- 快速跳转到某一天

**幸福日历（V1.1）**：
- 日历视图展示
- 有记录的日子高亮标记
- 点击日期查看详情

**幸福相册（V2.0）**：
- 瀑布流形式展示
- 优先显示图片/视频
- 卡片式精美排版

#### B. 搜索与筛选

**关键词搜索（V1.1）**：
- 支持全文搜索
- 示例："那天的日落"、"和家人吃饭"

**标签筛选（V2.0）**：
- 按标签分类：人、地点、主题（工作/关系/身体/成长）
- 支持多标签组合筛选

---

### 2.3 仪式感与唤醒（核心差异化）

#### A. 随机回顾（情绪急救包）

**"摇一摇"随机抽取（V1.1）**：
- 摇一摇手机随机弹出一条历史幸福记录
- 支持 N 年前的今天、N 天前等筛选

**每日一条（V1.1）**：
- 每天首次打开时自动推送一条过去的开心事
- 显示"今天的回忆：X 年前的今天，你..."

**情绪急救按钮（V2.0）**：
- 心情不好时，一键随机展示 5 条高光时刻
- 快速找回积极情绪

#### B. 视觉化容器

**"幸福罐子"概念（V2.0）**：
- 将记录变成折纸星星、糖果或胶囊存入虚拟罐子
- 视觉上直观感受到幸福的积累
- 打开罐子随机抽取

#### C. 定期总结

**时光胶囊（V2.0）**：
- 自动生成周报/月报/年报
- 汇总高光时刻、幸福指数
- 支持导出 PDF/图片

**数据统计（V2.0）**：
- 幸福指数分析图表（趋势图）
- 连续记录天数统计
- 幸福主题分布（饼图）

---

## 3. UI/UX 设计：治愈与温暖

### 3.1 视觉风格

**色调方案**：
- 不限定固定色板，根据页面场景和用户体验选择合适的配色
- 整体风格保持温暖治愈，色彩搭配和谐统一
- 具体色值参考项目代码中已有的样式实现

**字体风格**：
- 标题：圆润字体（微信默认加粗）
- 正文：清晰易读，字号 14-16px
- 引用/语录：手写风格（如需）

### 3.2 交互细节

**微交互**：
- 提交时有烟花绽放、气泡上升动画
- 成功时播放悦耳的"叮"声
- 按钮点击有缩放反馈

**卡片设计**：
- 精美的卡片式排版
- 圆角、阴影、柔和过渡
- 支持滑动删除、分享等快捷操作

**动效原则**：
- 轻快自然，不卡顿
- 不超过 0.3 秒的过渡时间
- 保持简洁，不过度设计

---

## 4. 社交、隐私与运营

### 4.1 隐私第一（核心原则）

**默认私密**：
- ✅ 数据仅自己可见，建立安全感
- ✅ 数据库权限设置为"仅创建者可读写"
- ✅ 管理员无法在小程序界面查看其他用户数据

**无社交压力**：
- ❌ 不做应用内社交（点赞、评论）
- ✅ 保持日记的纯粹性
- ✅ 避免比较和焦虑

### 4.2 有克制的分享

**高颜值海报生成（MVP 必需）**：
- 一键生成精美分享卡片
- 包含：文字、图片、日期、自定义背景
- 支持添加个性签名/水印
- 用于分享到朋友圈（唯一裂变出口）

**分享规则**：
- 用户主动选择分享（无强制）
- 默认分享为只读
- 不收集被分享者的信息

### 4.3 运营策略

**订阅消息（V1.1）**：
- 每晚定时（如 21:00）温柔提醒
- 内容："今天过得怎么样？记下一件开心的小事吧。"
- 用户可关闭

**游戏化激励（V2.0）**：
- 连续记录 7 天解锁徽章
- 连续记录 30 天解锁特殊皮肤
- 记录 100 条成就奖励

**数据驱动优化**：
- 分析用户活跃时间
- 优化提醒推送时机
- 迭代产品功能

---

## 5. 技术实现建议

### 5.1 基础设施

**强烈建议使用微信云开发**：

**优势**：
- ✅ 免服务器运维，专注业务逻辑
- ✅ 数据库和存储都在云端
- ✅ 免费额度通常够个人或 MVP 使用
- ✅ 与小程序天然集成，开发效率高

**云开发能力**：
- **云数据库**：JSON 文档型数据库，存储记录数据
- **云存储**：存储图片、视频等文件，内置 CDN
- **云函数**：处理业务逻辑，无需自建服务器
- **云调用**：调用微信开放接口（订阅消息等）

### 5.2 成本控制

**图片/视频处理**：
- 自动压缩上传的图片（限制尺寸和大小）
- 图片限制：单张不超过 2MB
- 视频限制：暂不支持（MVP 阶段）

**数据库优化**：
- 合理设计索引，提升查询性能
- 分页加载，避免一次返回过多数据
- 定期清理过期数据（如用户确认删除后 30 天）

**云函数优化**：
- 按需调用，避免不必要的执行
- 合理设置超时时间（默认 5 秒）
- 使用缓存减少数据库查询

### 5.3 AI 赋能（进阶 - V3.0）

**接入大模型 API**：
- 当用户记录后，AI 扮演温暖的朋友回复
- 提供鼓励或共鸣，增加情绪价值
- 示例：
  - 用户："今天完成了一个大项目！"
  - AI："太棒了！你的努力和坚持一定让你感到自豪。🎉"

**技术选型**：
- 使用云函数调用第三方 AI API
- 或使用微信云开发的 AI 服务
- 需要考虑成本和隐私

---

## 6. MVP（最小可行性产品）路线图

### 6.1 MVP 功能清单（第一版）

为了快速验证想法，第一版只做以下功能，其他全部砍掉：

#### 核心功能

✅ **极速记录**：
- 纯文字输入（不限字数）
- 1 张图片上传（可选）
- 自动记录时间戳
- 自动记录地理位置（需用户授权）

✅ **核心视图**：
- 时间轴列表（倒序展示）
- 点击查看详情
- 滑动删除记录

✅ **分享能力**：
- 一键生成精美图片海报
- 用于传播到朋友圈

✅ **基础回顾**：
- "随机看一条"按钮
- 每次随机展示一条历史记录

#### 数据库设计

**集合名称**：`happiness_records`

**数据结构**：
```json
{
  "_id": "记录ID",
  "_openid": "用户OpenID",
  "content": "文字内容",
  "image_url": "图片云存储地址",
  "location": {
    "latitude": 39.9042,
    "longitude": 116.4074,
    "name": "北京市朝阳区"
  },
  "tags": ["工作", "成就"], // 可选，MVP可暂不实现
  "created_at": "2026-01-16T10:00:00Z",
  "updated_at": "2026-01-16T10:00:00Z"
}
```

#### 页面结构

1. **首页 (`pages/home/index`)**：
   - 顶部：当前日期 + "今天记录了吗？"
   - 中间：快速输入框 + 图片上传按钮
   - 底部：查看历史、随机回顾入口

2. **记录列表页 (`pages/records/index`)**：
   - 时间轴形式展示
   - 点击查看详情
   - 滑动删除

3. **记录详情页 (`pages/record-detail/index`)**：
   - 展示完整记录
   - 分享海报按钮
   - 删除按钮

4. **分享海报页 (`pages/share/index`)**：
   - 生成精美海报
   - 预览和保存

#### 云函数

1. **创建记录** (`cloudfunctions/happiness/create`):
   - 验证数据
   - 上传图片到云存储
   - 保存记录到数据库

2. **查询记录** (`cloudfunctions/happiness/list`):
   - 分页查询用户记录
   - 支持倒序排序

3. **随机查询** (`cloudfunctions/happiness/random`):
   - 随机返回一条记录

4. **删除记录** (`cloudfunctions/happiness/delete`):
   - 删除记录
   - 删除关联的图片文件

### 6.2 版本规划

**V1.0 (MVP)**：
- 极速记录（文字 + 1 图片）
- 时间轴列表
- 随机回顾
- 分享海报
- 预计开发周期：2-3 周

**V1.1**：
- 幸福日历
- 每日回忆推送
- 订阅消息提醒
- 关键词搜索
- 预计开发周期：1-2 周

**V2.0**：
- 幸福相册（瀑布流）
- 标签系统
- 语音记录
- 情绪急救包
- 数据统计
- 预计开发周期：3-4 周

**V3.0**：
- AI 智能回复
- 时光胶囊
- 游戏化激励
- 个性化主题
- 预计开发周期：4-6 周

---

## 7. 非功能性需求

### 7.1 性能要求

- 首屏加载时间 < 1.5 秒
- 图片上传（2MB以内）< 5 秒
- 页面切换流畅（60fps）

### 7.2 兼容性

- 支持微信 7.0 及以上版本
- 兼容 iOS 和 Android
- 适配主流屏幕尺寸

### 7.3 安全性

- 用户数据隔离（仅自己可见）
- 数据库权限严格控制
- 敏感操作需二次确认

### 7.4 可用性

- 核心功能可用性 > 99.5%
- 系统故障时有友好提示
- 提供常见问题 FAQ

---

## 8. 数据埋点与分析

### 8.1 核心指标

**用户活跃度**：
- 日活跃用户数（DAU）
- 周活跃用户数（WAU）
- 月活跃用户数（MAU）

**留存率**：
- 次日留存率
- 7 日留存率
- 30 日留存率

**使用行为**：
- 平均每日记录数
- 记录功能使用率
- 分享功能使用率

### 8.2 埋点事件

1. `record_create`：创建记录
2. `record_view`：查看记录详情
3. `record_delete`：删除记录
4. `share_poster`：生成分享海报
5. `random_view`：查看随机记录
6. `calendar_view`：查看日历（V1.1）

---

## 9. 风险与对策

### 9.1 技术风险

**风险**：云开发免费额度不足
**对策**：
- 控制图片大小和数量
- 监控使用量，及时升级套餐
- 考虑图片压缩和 CDN 缓存

**风险**：用户隐私担忧
**对策**：
- 明确隐私政策
- 默认私密设置
- 提供数据导出和删除功能

### 9.2 产品风险

**风险**：用户坚持不住，留存率低
**对策**：
- 降低记录门槛（极简设计）
- 订阅消息温和提醒
- 游戏化激励（后期）

**风险**：功能过于复杂，用户迷失
**对策**：
- 严格 MVP 思维
- 功能简洁明了
- 逐步迭代，不强求

### 9.3 运营风险

**风险**：推广成本高，用户增长慢
**对策**：
- 依赖自然裂变（分享海报）
- 通过口碑传播
- 优质内容吸引用户

---

## 10. 成功标准

### 10.1 MVP 验证指标

完成 MVP 后，若满足以下标准，继续迭代：

- ✅ 至少 100 个注册用户
- ✅ 次日留存率 > 30%
- ✅ 用户平均每周记录 > 2 条
- ✅ 问卷调查满意度 > 70%

### 10.2 长期目标

**3 个月**：
- 累计用户 > 1000
- DAU > 100
- 满意度 > 80%

**6 个月**：
- 累计用户 > 5000
- DAU > 500
- 实现收支平衡

**1 年**：
- 累计用户 > 20000
- DAU > 2000
- 探索商业化模式

---

## 11. 附录

### 11.1 参考资源

- 积极心理学：三件好事（Three Good Things）练习
- 微信云开发文档：https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html
- 小程序设计规范：https://developers.weixin.qq.com/miniprogram/design/

### 11.2 竞品分析

- **Day One**：优秀的日记应用，参考其简洁设计
- **格志日记**：引导式记录，参考其模板系统
- **小确幸**：国内类似产品，参考其 UI 设计

### 11.3 后续优化方向

- 支持多语言（英文、日文等）
- 支持数据导入/导出（备份）
- 支持桌面端同步
- 开放 API，接入第三方服务

---

**文档版本**：v1.0
**创建日期**：2026-01-16
**文档状态**：✅ 已完成
